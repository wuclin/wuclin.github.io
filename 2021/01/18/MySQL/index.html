<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Pisces","version":"7.7.2","exturl":false,"sidebar":{"position":"hide","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="MySQL关系型数据库，默认端口3306 1mysql&gt; show engines; 注意只有InnoDB支持事务。 MyISAM和InnoDB区别">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL">
<meta property="og:url" content="http://yoursite.com/2021/01/18/MySQL/index.html">
<meta property="og:site_name" content="fufu">
<meta property="og:description" content="MySQL关系型数据库，默认端口3306 1mysql&gt; show engines; 注意只有InnoDB支持事务。 MyISAM和InnoDB区别">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://yoursite.com/2021/01/18/MySQL/img_innerjoin.gif">
<meta property="og:image" content="http://yoursite.com/2021/01/18/MySQL/img_leftjoin.gif">
<meta property="og:image" content="http://yoursite.com/2021/01/18/MySQL/img_rightjoin.gif">
<meta property="og:image" content="http://yoursite.com/2021/01/18/MySQL/img_fulljoin.gif">
<meta property="article:published_time" content="2021-01-17T17:23:06.000Z">
<meta property="article:modified_time" content="2021-11-30T12:02:04.299Z">
<meta property="article:author" content="wudelic">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2021/01/18/MySQL/img_innerjoin.gif">

<link rel="canonical" href="http://yoursite.com/2021/01/18/MySQL/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true
  };
</script>

  <title>MySQL | fufu</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">fufu</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">记录一下</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-fw fa-calendar"></i>Schedule</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/18/MySQL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="wudelic">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fufu">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MySQL
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-18 01:23:06" itemprop="dateCreated datePublished" datetime="2021-01-18T01:23:06+08:00">2021-01-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-11-30 20:02:04" itemprop="dateModified" datetime="2021-11-30T20:02:04+08:00">2021-11-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><p><strong>关系型数据库，默认端口3306</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> engines;</span><br></pre></td></tr></table></figure>
<p>注意只有InnoDB支持事务。</p>
<h3 id="MyISAM和InnoDB区别"><a href="#MyISAM和InnoDB区别" class="headerlink" title="MyISAM和InnoDB区别"></a>MyISAM和InnoDB区别</h3><p>MyISAM是MySQL的默认数据库引擎（5.5版之前）。虽然性能极佳，而且提供了大量的特性，包括全文索引、压缩、空间函数等，但MyISAM不支持事务和行级锁，而且最大的缺陷就是崩溃后无法安全恢复。不过，5.5版本之后，MySQL引入了InnoDB（事务性数据库引擎），MySQL 5.5版本后默认的存储引擎为InnoDB，也就是说现在安装的MySQL都是InnoDB存储引擎。</p>
<p>由于崩溃后的有安全恢复问题的话，一般不选用MyISAM</p>
<p>MyISAM是表锁，查数据要把整个表锁起来，在高并发下不好</p>
<p>InnoDB是行锁</p>
<h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3><p><strong>索引是一种用于快速查询和检索数据的数据结构。常见的索引结构有: B 树， B+树和 Hash。</strong></p>
<p>MySQL索引使用的数据结构主要有<strong>BTree索引</strong> 和 <strong>哈希索引</strong> 。</p>
<p>对于哈希索引来说，底层的数据结构就是哈希表，因此在绝大多数需求为单条记录查询的时候，可以选择哈希索引，查询性能最快；其余大部分场景，建议选择BTree索引。</p>
<p>MySQL的BTree索引使用的是B树中的B+Tree，但对于主要的两种存储引擎的实现方式是不同的。MySQL的BTree索引使用的是B树中的B+Tree，但对于主要的两种存储引擎的实现方式是不同的。</p>
<ul>
<li><strong>MyISAM:</strong> B+Tree叶节点的data域存放的是数据记录的地址。在索引检索的时候，首先按照B+Tree搜索算法搜索索引，如果指定的Key存在，则取出其 data 域的值，然后以 data 域的值为地址读取相应的数据记录。这被称为“非聚簇索引”。</li>
<li><strong>InnoDB:</strong> 其数据文件本身就是索引文件。相比MyISAM，索引文件和数据文件是分离的，其表数据文件本身就是按B+Tree组织的一个索引结构，树的叶节点data域保存了完整的数据记录。这个索引的key是数据表的主键，因此InnoDB表数据文件本身就是主索引。这被称为“聚簇索引（或聚集索引）”。而其余的索引都作为辅助索引，辅助索引的data域存储相应记录主键的值而不是地址，这也是和MyISAM不同的地方。<strong>在根据主索引搜索时，直接找到key所在的节点即可取出数据；在根据辅助索引查找时，则需要先取出主键的值，再走一遍主索引。</strong> <strong>因此，在设计表的时候，不建议使用过长的字段作为主键，也不建议使用非单调的字段作为主键，这样会造成主索引频繁分裂。</strong></li>
</ul>
<h4 id="为什么要创建索引"><a href="#为什么要创建索引" class="headerlink" title="为什么要创建索引"></a>为什么要创建索引</h4><ol>
<li>通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性。</li>
<li>可以大大加快 数据的检索速度（大大减少的检索的数据量）, 这也是创建索引的最主要的原因。</li>
<li>帮助服务器避免排序和临时表。</li>
<li>将随机IO变为顺序IO</li>
<li>可以加速表和表之间的连接，特别是在实现数据的参考完整性方面特别有意义。</li>
</ol>
<h4 id="为什么不对每个表都创建索引"><a href="#为什么不对每个表都创建索引" class="headerlink" title="为什么不对每个表都创建索引"></a>为什么不对每个表都创建索引</h4><ol>
<li>当对表中的数据进行增加、删除和修改的时候，索引也要动态的维护，这样就降低了数据的维护速度。</li>
<li>索引需要占物理空间，除了数据表占数据空间之外，每一个索引还要占一定的物理空间，如果要建立聚簇索引，那么需要的空间就会更大。</li>
<li>创建索引和维护索引要耗费时间，这种时间随着数据量的增加而增加。</li>
</ol>
<h4 id="使用索引注意事项"><a href="#使用索引注意事项" class="headerlink" title="使用索引注意事项"></a>使用索引注意事项</h4><ol>
<li><p>在经常需要搜索的列上，可以加快搜索的速度；</p>
</li>
<li><p>在经常使用在WHERE子句中的列上面创建索引，加快条件的判断速度。</p>
</li>
<li><p>在经常需要排序的列上创 建索引，因为索引已经排序，这样查询可以利用索引的排序，加快排序查询时间；</p>
</li>
<li><p>对于中到大型表索引都是非常有效的，但是特大型表的话维护开销会很大，不适合建索引</p>
</li>
<li><p>在经常用在连接的列上，这 些列主要是一些外键，可以加快连接的速度；</p>
</li>
<li><p>避免 where 子句中对字段施加函数，这会造成无法命中索引。</p>
</li>
<li><p>在使用InnoDB时使用与业务无关的自增主键作为主键，即使用逻辑主键，而不要使用业务主键8</p>
</li>
<li><p>删除长期未使用的索引，不用的索引的存在会造成不必要的性能损耗 MySQL 5.7 可以通过查询 sys 库的 chema_unused_indexes 视图来查询哪些索引从未被使用</p>
</li>
<li><p>在使用 limit offset 查询缓慢时，可以借助索引来提高性能</p>
</li>
</ol>
<h4 id="索引覆盖"><a href="#索引覆盖" class="headerlink" title="索引覆盖"></a>索引覆盖</h4><p>如果一个索引包含（或者说覆盖）所有需要查询的字段的值，我们就称之为“覆盖索引”。</p>
<p>InnoDB存储引擎中，如果不是主键索引，叶子节点存储的是主键+列值。最终还是要“回表”，也就是要通过主键再查找一次。这样就会比较慢覆盖索引就是把要查询出的列和索引是对应的，不做回表操作！</p>
<p>覆盖索引使用实例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> username , age <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> username <span class="operator">=</span> <span class="string">&#x27;Java&#x27;</span> <span class="keyword">and</span> age <span class="operator">=</span> <span class="number">22</span></span><br></pre></td></tr></table></figure>
<p>在查询数据的时候：要查询出的列在叶子节点都存在！所以，就不用回表。</p>
<h4 id="为什么索引会变快"><a href="#为什么索引会变快" class="headerlink" title="为什么索引会变快"></a>为什么索引会变快</h4><p>不用索引是遍历单链表，用了索引之后像B+树一样</p>
<p>大多数情况下，索引查询都是比全表扫描要快的。但是如果数据库的数据量不大，那么使用索引也不一定能够带来很大提升。</p>
<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><p><strong>事务是逻辑上的一组操作，要么都执行，要么都不执行。</strong></p>
<p>事务最经典也经常被拿出来说例子就是转账了。假如小明要给小红转账1000元，这个转账会涉及到两个关键操作就是：将小明的余额减少1000元，将小红的余额增加1000元。万一在这两个操作之间突然出现错误比如银行系统崩溃，导致小明余额减少而小红的余额没有增加，这样就不对了。事务就是保证这两个关键操作要么都成功，要么都要失败。</p>
<p>事务的四大特性（ACID）</p>
<ol>
<li><strong>原子性（Atomicity）：</strong> 事务是最小的执行单位，不允许分割。事务的原子性确保动作要么全部完成，要么完全不起作用；</li>
<li><strong>一致性（Consistency）：</strong> 执行事务后，数据库从一个正确的状态变化到另一个正确的状态；</li>
<li><strong>隔离性（Isolation）：</strong> 并发访问数据库时，一个用户的事务不被其他事务所干扰，各并发事务之间数据库是独立的；</li>
<li><strong>持久性（Durability）：</strong> 一个事务被提交之后。它对数据库中数据的改变是持久的，即使数据库发生故障也不应该对其有任何影响。</li>
</ol>
<h4 id="并发事务带来的问题"><a href="#并发事务带来的问题" class="headerlink" title="并发事务带来的问题"></a>并发事务带来的问题</h4><p>并发事务是指：在典型的应用程序中，多个事务并发运行，经常会操作相同的数据来完成各自的任务（多个用户对同一数据进行操作）。并发虽然是必须的，但可能会导致以下的问题。</p>
<ul>
<li><strong>脏读（Dirty read）:</strong> 当一个事务正在访问数据并且对数据进行了修改，而这种修改还没有提交到数据库中，这时另外一个事务也访问了这个数据，然后使用了这个数据。因为这个数据是还没有提交的数据，那么另外一个事务读到的这个数据是“脏数据”，依据“脏数据”所做的操作可能是不正确的。</li>
<li><strong>丢失修改（Lost to modify）:</strong> 指在一个事务读取一个数据时，另外一个事务也访问了该数据，那么在第一个事务中修改了这个数据后，第二个事务也修改了这个数据。这样第一个事务内的修改结果就被丢失，因此称为丢失修改。 例如：事务1读取某表中的数据A=20，事务2也读取A=20，事务1修改A=A-1，事务2也修改A=A-1，最终结果A=19，事务1的修改被丢失。</li>
<li><strong>不可重复读（Unrepeatableread）:</strong> 指在一个事务内多次读同一数据。在这个事务还没有结束时，另一个事务也访问该数据。那么，在第一个事务中的两次读数据之间，由于第二个事务的修改导致第一个事务两次读取的数据可能不太一样。这就发生了在一个事务内两次读到的数据是不一样的情况，因此称为不可重复读。</li>
<li><strong>幻读（Phantom read）:</strong> 幻读与不可重复读类似。它发生在一个事务（T1）读取了几行数据，接着另一个并发事务（T2）插入了一些数据时。在随后的查询中，第一个事务（T1）就会发现多了一些原本不存在的记录，就好像发生了幻觉一样，所以称为幻读。</li>
</ul>
<p><strong>不可重复读和幻读区别：</strong></p>
<p>不可重复读的重点是修改比如多次读取一条记录发现其中某些列的值被修改，幻读的重点在于新增或者删除比如多次读取一条记录发现记录增多或减少了。</p>
<h3 id="锁机制与InnoDB锁算法"><a href="#锁机制与InnoDB锁算法" class="headerlink" title="锁机制与InnoDB锁算法"></a>锁机制与InnoDB锁算法</h3><p><strong>MyISAM和InnoDB存储引擎使用的锁：</strong></p>
<ul>
<li>MyISAM采用表级锁(table-level locking)。</li>
<li>InnoDB支持行级锁(row-level locking)和表级锁,默认为行级锁</li>
</ul>
<p><strong>表级锁和行级锁对比：</strong></p>
<ul>
<li><strong>表级锁：</strong> MySQL中锁定 <strong>粒度最大</strong> 的一种锁，对当前操作的整张表加锁，实现简单，资源消耗也比较少，加锁快，不会出现死锁。其锁定粒度最大，触发锁冲突的概率最高，并发度最低，MyISAM和 InnoDB引擎都支持表级锁。</li>
<li><strong>行级锁：</strong> MySQL中锁定 <strong>粒度最小</strong> 的一种锁，只针对当前操作的行进行加锁。 行级锁能大大减少数据库操作的冲突。其加锁粒度最小，并发度高，但加锁的开销也最大，加锁慢，会出现死锁。</li>
</ul>
<h3 id="什么是触发器"><a href="#什么是触发器" class="headerlink" title="什么是触发器"></a>什么是触发器</h3><p>触发器是指一段代码，当触发某个事件时，自动执行这些代码</p>
<p>SQL 分为两个部分：数据操作语言 (DML) 和 数据定义语言 (DDL)。</p>
<p>SQL 的 DML 部分：</p>
<ul>
<li><em>SELECT</em> - 从数据库表中获取数据</li>
<li><em>UPDATE</em> - 更新数据库表中的数据</li>
<li><em>DELETE</em> - 从数据库表中删除数据</li>
<li><em>INSERT INTO</em> - 向数据库表中插入数据</li>
</ul>
<p>SQL 中最重要的 DDL 语句:</p>
<ul>
<li><em>CREATE DATABASE</em> - 创建新数据库</li>
<li><em>ALTER DATABASE</em> - 修改数据库</li>
<li><em>CREATE TABLE</em> - 创建新表</li>
<li><em>ALTER TABLE</em> - 变更（改变）数据库表</li>
<li><em>DROP TABLE</em> - 删除表</li>
<li><em>CREATE INDEX</em> - 创建索引（搜索键）</li>
<li><em>DROP INDEX</em> - 删除索引</li>
</ul>
<h2 id="select"><a href="#select" class="headerlink" title="select"></a>select</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> column1, column2</span><br><span class="line"><span class="keyword">from</span> table_name;</span><br></pre></td></tr></table></figure>
<h3 id="select-distinct"><a href="#select-distinct" class="headerlink" title="select distinct"></a>select distinct</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> column1, column2</span><br><span class="line"><span class="keyword">from</span> table_name;</span><br></pre></td></tr></table></figure>
<h3 id="select-where"><a href="#select-where" class="headerlink" title="select where"></a>select where</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> column1, column2</span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure>
<p>condition里面的文字使用单引号，数字不用</p>
<blockquote>
<p>where里面的一些运算符</p>
<p>=,&gt;,&lt;,&gt;=,&lt;=,&lt;&gt;(不等于)</p>
<p>between,like,in</p>
</blockquote>
<h2 id="like"><a href="#like" class="headerlink" title="like"></a>like</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#通配符： <span class="operator">%</span>代表多个 _代表一个</span><br><span class="line"><span class="keyword">select</span> column1, column2</span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">column</span> <span class="keyword">like</span> <span class="keyword">pattern</span>;</span><br></pre></td></tr></table></figure>
<h2 id="in"><a href="#in" class="headerlink" title="in"></a>in</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">column</span></span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">column</span> <span class="keyword">in</span> (value1, value2);</span><br><span class="line"></span><br><span class="line">#或者</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">column</span></span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">column</span> <span class="keyword">in</span> (<span class="keyword">select</span> statement);</span><br></pre></td></tr></table></figure>
<h2 id="between"><a href="#between" class="headerlink" title="between"></a>between</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">column</span></span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">column</span> <span class="keyword">between</span> value1 <span class="keyword">and</span> value2;</span><br></pre></td></tr></table></figure>
<p>select AND,OR,NOT</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">AND</span></span><br><span class="line"><span class="keyword">select</span> column1, column2</span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> condition1 <span class="keyword">and</span> condition2;</span><br><span class="line">#<span class="keyword">OR</span></span><br><span class="line"><span class="keyword">select</span> column1, column2</span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> condition1 <span class="keyword">or</span> condition2;</span><br><span class="line">#<span class="keyword">NOT</span></span><br><span class="line"><span class="keyword">select</span> column1, column2</span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure>
<h2 id="order-by"><a href="#order-by" class="headerlink" title="order by"></a>order by</h2><p><strong>升降序(默认asc升序，使用desc降序)</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> column1, column2</span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> column1, column2 <span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>
<h2 id="insert-into"><a href="#insert-into" class="headerlink" title="insert into"></a>insert into</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#指定列名称</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> table_name (column1, column2)</span><br><span class="line"><span class="keyword">values</span> (value1, value2);</span><br><span class="line"></span><br><span class="line">#所有的列，注意顺序需要相同</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> table_name</span><br><span class="line"><span class="keyword">values</span> (value1, value2, value3);</span><br></pre></td></tr></table></figure>
<h2 id="NULL值"><a href="#NULL值" class="headerlink" title="NULL值"></a>NULL值</h2><p><strong>不能使用比较运算符（例如=，&lt;或&lt;&gt;）测试NULL值</strong></p>
<p><strong>而是使用is null 或者is not null</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">null</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">column</span></span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">column</span> <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">#<span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">column</span></span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">column</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>
<h2 id="update"><a href="#update" class="headerlink" title="update"></a>update</h2><p><strong>注意如果没有where子句，则表中所有的记录都会被更新</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> table_name</span><br><span class="line"><span class="keyword">set</span> column1 <span class="operator">=</span> value1, column2 <span class="operator">=</span> value2</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure>
<h2 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h2><p><strong>注意如果没有where子句，则表中所有的记录都会被删除</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">condition</span></span><br></pre></td></tr></table></figure>
<h2 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">column</span></span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">condition</span></span><br><span class="line">limit number;</span><br></pre></td></tr></table></figure>
<h2 id="min-max"><a href="#min-max" class="headerlink" title="min(),max()"></a>min(),max()</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#min</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(<span class="keyword">column</span>)</span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">condition</span>;</span><br><span class="line"></span><br><span class="line">#max</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(<span class="keyword">column</span>)</span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure>
<h2 id="count-avg-sum"><a href="#count-avg-sum" class="headerlink" title="count(),avg(),sum()"></a>count(),avg(),sum()</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#count 返回与指定条件匹配的行数</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="keyword">column</span>)</span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">condition</span>;</span><br><span class="line"></span><br><span class="line">#avg 返回数字列的平均值</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(<span class="keyword">column</span>)</span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">condition</span>;</span><br><span class="line"></span><br><span class="line">#sum 返回数字列的总和</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(<span class="keyword">column</span>)</span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure>
<p>别名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">column</span> <span class="keyword">as</span> c</span><br><span class="line"><span class="keyword">from</span> table_name;</span><br></pre></td></tr></table></figure>
<h2 id="inner-join"><a href="#inner-join" class="headerlink" title="inner join"></a>inner join</h2><p><strong>选择记录有两个表中匹配的值</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">column</span> </span><br><span class="line"><span class="keyword">from</span> table1 <span class="keyword">as</span> t1 </span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> table2 <span class="keyword">as</span> t2</span><br><span class="line"><span class="keyword">on</span> t1.column <span class="operator">=</span> t2.column;</span><br></pre></td></tr></table></figure>
<img src="/2021/01/18/MySQL/img_innerjoin.gif" class title="SQL内部联接">

<h2 id="left-join"><a href="#left-join" class="headerlink" title="left join"></a>left join</h2><p><strong>返回左表中的所有记录，以及来自右表匹配的记录</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">column</span></span><br><span class="line"><span class="keyword">from</span> table1 <span class="keyword">as</span> t1 </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> table2 <span class="keyword">as</span> t2</span><br><span class="line"><span class="keyword">on</span> t1.column <span class="operator">=</span> t2.column;</span><br></pre></td></tr></table></figure>
<img src="/2021/01/18/MySQL/img_leftjoin.gif" class title="SQL左联接">

<h2 id="right-join"><a href="#right-join" class="headerlink" title="right join"></a>right join</h2><p><strong>返回右表中的所有记录，以及来自左表匹配的记录</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">column</span></span><br><span class="line"><span class="keyword">from</span> table1 <span class="keyword">as</span> t1 </span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span> table2 <span class="keyword">as</span> t2</span><br><span class="line"><span class="keyword">on</span> t1.column <span class="operator">=</span> t2.column;</span><br></pre></td></tr></table></figure>
<img src="/2021/01/18/MySQL/img_rightjoin.gif" class title="SQL右联接">

<h2 id="full-join-full-outer-join"><a href="#full-join-full-outer-join" class="headerlink" title="full join / full outer join"></a>full join / full outer join</h2><p><strong>当左表或右表记录匹配时，返回所有记录</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">column</span></span><br><span class="line"><span class="keyword">from</span> table1 <span class="keyword">as</span> t1 </span><br><span class="line"><span class="keyword">full</span> <span class="keyword">outer</span> <span class="keyword">join</span> table2 <span class="keyword">as</span> t2</span><br><span class="line"><span class="keyword">on</span> t1.column <span class="operator">=</span> t2.column</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure>
<img src="/2021/01/18/MySQL/img_fulljoin.gif" class title="SQL FULL OUTER JOIN">

<h2 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a>group by</h2><p><strong>将相同值的行分组</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">column</span></span><br><span class="line"><span class="keyword">from</span> table_name </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">condition</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">column</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">column</span>;</span><br></pre></td></tr></table></figure>
<h2 id="having"><a href="#having" class="headerlink" title="having"></a>having</h2><p>该<code>HAVING</code>子句已添加到SQL，因为 <code>WHERE</code>关键字不能与聚合函数一起使用。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> column_name(s)</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">condition</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column_name(s);</span><br></pre></td></tr></table></figure>
<h2 id="exists"><a href="#exists" class="headerlink" title="exists"></a>exists</h2><p><strong>如果select返回记录，则exists返回true</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span></span><br><span class="line">(<span class="keyword">SELECT</span> column_name <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> <span class="keyword">condition</span>);</span><br></pre></td></tr></table></figure>
<h1 id="检索数据select"><a href="#检索数据select" class="headerlink" title="检索数据select"></a>检索数据select</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">select prod_name from products;</span><br><span class="line">+---------------------+</span><br><span class="line">| prod_name           |</span><br><span class="line">+---------------------+</span><br><span class="line">| Fish bean bag toy   |</span><br><span class="line">| Bird bean bag toy   |</span><br><span class="line">| Rabbit bean bag toy |</span><br><span class="line">| 8 inch teddy bear   |</span><br><span class="line">| 12 inch teddy bear  |</span><br><span class="line">| 18 inch teddy bear  |</span><br><span class="line">| Raggedy Ann         |</span><br><span class="line">| King doll           |</span><br><span class="line">| Queen doll          |</span><br><span class="line">+---------------------+</span><br><span class="line"></span><br><span class="line">select prod_id, prod_name, prod_price from products;</span><br><span class="line">+---------+---------------------+------------+</span><br><span class="line">| prod_id | prod_name           | prod_price |</span><br><span class="line">+---------+---------------------+------------+</span><br><span class="line">| BNBG01  | Fish bean bag toy   | 3.49       |</span><br><span class="line">| BNBG02  | Bird bean bag toy   | 3.49       |</span><br><span class="line">| BNBG03  | Rabbit bean bag toy | 3.49       |</span><br><span class="line">| BR01    | 8 inch teddy bear   | 5.99       |</span><br><span class="line">| BR02    | 12 inch teddy bear  | 8.99       |</span><br><span class="line">| BR03    | 18 inch teddy bear  | 11.99      |</span><br><span class="line">| RGAN01  | Raggedy Ann         | 4.99       |</span><br><span class="line">| RYL01   | King doll           | 9.49       |</span><br><span class="line">| RYL02   | Queen doll          | 9.49       |</span><br><span class="line">+---------+---------------------+------------+</span><br><span class="line"></span><br><span class="line">select vend_id from products;</span><br><span class="line">+---------+</span><br><span class="line">| vend_id |</span><br><span class="line">+---------+</span><br><span class="line">| BRS01   |</span><br><span class="line">| BRS01   |</span><br><span class="line">| BRS01   |</span><br><span class="line">| DLL01   |</span><br><span class="line">| DLL01   |</span><br><span class="line">| DLL01   |</span><br><span class="line">| DLL01   |</span><br><span class="line">| FNG01   |</span><br><span class="line">| FNG01   |</span><br><span class="line">+---------+</span><br><span class="line"></span><br><span class="line">select distinct vend_id from products;</span><br><span class="line">+---------+</span><br><span class="line">| vend_id |</span><br><span class="line">+---------+</span><br><span class="line">| BRS01   |</span><br><span class="line">| DLL01   |</span><br><span class="line">| FNG01   |</span><br><span class="line">+---------+</span><br><span class="line"></span><br><span class="line">select prod_name from products limit 5; #限制输出5行</span><br><span class="line">+---------------------+</span><br><span class="line">| prod_name           |</span><br><span class="line">+---------------------+</span><br><span class="line">| Fish bean bag toy   |</span><br><span class="line">| Bird bean bag toy   |</span><br><span class="line">| Rabbit bean bag toy |</span><br><span class="line">| 8 inch teddy bear   |</span><br><span class="line">| 12 inch teddy bear  |</span><br><span class="line">+---------------------+</span><br><span class="line"></span><br><span class="line">select prod_name from products limit 5 offset 5;#两个语句等价</span><br><span class="line">select prod_name from products limit 5, 5;</span><br><span class="line"></span><br><span class="line">#第五行开始输出五行，limit限制返回行数，offset指定limit从哪里开始，注意offset从0开始</span><br><span class="line">+--------------------+</span><br><span class="line">| prod_name          |</span><br><span class="line">+--------------------+</span><br><span class="line">| 18 inch teddy bear |</span><br><span class="line">| Raggedy Ann        |</span><br><span class="line">| King doll          |</span><br><span class="line">| Queen doll         |</span><br><span class="line">+--------------------+</span><br></pre></td></tr></table></figure>
<h1 id="排序检索数据order-by"><a href="#排序检索数据order-by" class="headerlink" title="排序检索数据order by"></a>排序检索数据order by</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">select prod_name from products order by prod_name;</span><br><span class="line">#保证它是SELECT语句中最后一条子句</span><br><span class="line">+---------------------+</span><br><span class="line">| prod_name           |</span><br><span class="line">+---------------------+</span><br><span class="line">| 12 inch teddy bear  |</span><br><span class="line">| 18 inch teddy bear  |</span><br><span class="line">| 8 inch teddy bear   |</span><br><span class="line">| Bird bean bag toy   |</span><br><span class="line">| Fish bean bag toy   |</span><br><span class="line">| King doll           |</span><br><span class="line">| Queen doll          |</span><br><span class="line">| Rabbit bean bag toy |</span><br><span class="line">| Raggedy Ann         |</span><br><span class="line">+---------------------+</span><br><span class="line"></span><br><span class="line">select prod_id, prod_price, prod_name from products order by prod_price, prod_name;</span><br><span class="line">#按多个列排序，只有有多个相同prod_price才会按prod_name排序</span><br><span class="line">#如果prod_price列中所有的值都是唯一的，则不会按prod_name排序</span><br><span class="line">+---------+------------+---------------------+</span><br><span class="line">| prod_id | prod_price | prod_name           |</span><br><span class="line">+---------+------------+---------------------+</span><br><span class="line">| BNBG02  | 3.49       | Bird bean bag toy   |</span><br><span class="line">| BNBG01  | 3.49       | Fish bean bag toy   |</span><br><span class="line">| BNBG03  | 3.49       | Rabbit bean bag toy |</span><br><span class="line">| RGAN01  | 4.99       | Raggedy Ann         |</span><br><span class="line">| BR01    | 5.99       | 8 inch teddy bear   |</span><br><span class="line">| BR02    | 8.99       | 12 inch teddy bear  |</span><br><span class="line">| RYL01   | 9.49       | King doll           |</span><br><span class="line">| RYL02   | 9.49       | Queen doll          |</span><br><span class="line">| BR03    | 11.99      | 18 inch teddy bear  |</span><br><span class="line">+---------+------------+---------------------+</span><br><span class="line"></span><br><span class="line">select prod_id, prod_price, prod_name from products order by 2, 3;</span><br><span class="line">#ORDERBY 2，3表示先按prod_price，再按prod_name进行排序</span><br><span class="line">+---------+------------+---------------------+</span><br><span class="line">| prod_id | prod_price | prod_name           |</span><br><span class="line">+---------+------------+---------------------+</span><br><span class="line">| BNBG02  | 3.49       | Bird bean bag toy   |</span><br><span class="line">| BNBG01  | 3.49       | Fish bean bag toy   |</span><br><span class="line">| BNBG03  | 3.49       | Rabbit bean bag toy |</span><br><span class="line">| RGAN01  | 4.99       | Raggedy Ann         |</span><br><span class="line">| BR01    | 5.99       | 8 inch teddy bear   |</span><br><span class="line">| BR02    | 8.99       | 12 inch teddy bear  |</span><br><span class="line">| RYL01   | 9.49       | King doll           |</span><br><span class="line">| RYL02   | 9.49       | Queen doll          |</span><br><span class="line">| BR03    | 11.99      | 18 inch teddy bear  |</span><br><span class="line">+---------+------------+---------------------+</span><br><span class="line"></span><br><span class="line"> select prod_id, prod_price, prod_name from products order by prod_price desc;</span><br><span class="line"> #desc表示降序，默认为升序asc</span><br><span class="line"> +---------+------------+---------------------+</span><br><span class="line">| prod_id | prod_price | prod_name           |</span><br><span class="line">+---------+------------+---------------------+</span><br><span class="line">| BR03    | 11.99      | 18 inch teddy bear  |</span><br><span class="line">| RYL01   | 9.49       | King doll           |</span><br><span class="line">| RYL02   | 9.49       | Queen doll          |</span><br><span class="line">| BR02    | 8.99       | 12 inch teddy bear  |</span><br><span class="line">| BR01    | 5.99       | 8 inch teddy bear   |</span><br><span class="line">| RGAN01  | 4.99       | Raggedy Ann         |</span><br><span class="line">| BNBG01  | 3.49       | Fish bean bag toy   |</span><br><span class="line">| BNBG02  | 3.49       | Bird bean bag toy   |</span><br><span class="line">| BNBG03  | 3.49       | Rabbit bean bag toy |</span><br><span class="line">+---------+------------+---------------------+</span><br><span class="line"></span><br><span class="line">select prod_id, prod_price, prod_name from products order by prod_price desc, prod_name;</span><br><span class="line">#desc只应用到直接位于其前面的列名，如果想在多个列上进行降序排序，必须对每一列指定DESC关键字</span><br><span class="line">+---------+------------+---------------------+</span><br><span class="line">| prod_id | prod_price | prod_name           |</span><br><span class="line">+---------+------------+---------------------+</span><br><span class="line">| BR03    | 11.99      | 18 inch teddy bear  |</span><br><span class="line">| RYL01   | 9.49       | King doll           |</span><br><span class="line">| RYL02   | 9.49       | Queen doll          |</span><br><span class="line">| BR02    | 8.99       | 12 inch teddy bear  |</span><br><span class="line">| BR01    | 5.99       | 8 inch teddy bear   |</span><br><span class="line">| RGAN01  | 4.99       | Raggedy Ann         |</span><br><span class="line">| BNBG02  | 3.49       | Bird bean bag toy   |</span><br><span class="line">| BNBG01  | 3.49       | Fish bean bag toy   |</span><br><span class="line">| BNBG03  | 3.49       | Rabbit bean bag toy |</span><br><span class="line">+---------+------------+---------------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="过滤数据where"><a href="#过滤数据where" class="headerlink" title="过滤数据where"></a>过滤数据where</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">select prod_name, prod_price from products where prod_price &#x3D; 3.49;</span><br><span class="line">+---------------------+------------+</span><br><span class="line">| prod_name           | prod_price |</span><br><span class="line">+---------------------+------------+</span><br><span class="line">| Fish bean bag toy   | 3.49       |</span><br><span class="line">| Bird bean bag toy   | 3.49       |</span><br><span class="line">| Rabbit bean bag toy | 3.49       |</span><br><span class="line">+---------------------+------------+</span><br><span class="line"></span><br><span class="line">select prod_name, prod_price from products where prod_price between 5 and 10;</span><br><span class="line">#包括了5和10</span><br><span class="line">+--------------------+------------+</span><br><span class="line">| prod_name          | prod_price |</span><br><span class="line">+--------------------+------------+</span><br><span class="line">| 8 inch teddy bear  | 5.99       |</span><br><span class="line">| 12 inch teddy bear | 8.99       |</span><br><span class="line">| King doll          | 9.49       |</span><br><span class="line">| Queen doll         | 9.49       |</span><br><span class="line">+--------------------+------------+</span><br><span class="line"></span><br><span class="line">select cust_name from customers where cust_email is null;</span><br><span class="line">#null与字段包含0、空字符串或仅仅包含空格不同，不能用&#x3D;查找</span><br><span class="line">+---------------+</span><br><span class="line">| cust_name     |</span><br><span class="line">+---------------+</span><br><span class="line">| Kids Place    |</span><br><span class="line">| The Toy Store |</span><br><span class="line">+---------------+</span><br></pre></td></tr></table></figure>
<h1 id="高级数据过滤NOT，IN"><a href="#高级数据过滤NOT，IN" class="headerlink" title="高级数据过滤NOT，IN"></a>高级数据过滤NOT，IN</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">select prod_id, prod_price, prod_namefrom products where vend_id &#x3D; &#39;DLL01&#39; AND prod_price &lt;&#x3D; 4;</span><br><span class="line">#AND</span><br><span class="line">+---------+------------+---------------------+</span><br><span class="line">| prod_id | prod_price | prod_name           |</span><br><span class="line">+---------+------------+---------------------+</span><br><span class="line">| BNBG01  | 3.49       | Fish bean bag toy   |</span><br><span class="line">| BNBG02  | 3.49       | Bird bean bag toy   |</span><br><span class="line">| BNBG03  | 3.49       | Rabbit bean bag toy |</span><br><span class="line">+---------+------------+---------------------+</span><br><span class="line"></span><br><span class="line">select prod_name, prod_price from products where vend_id &#x3D; &#39;DLL01&#39; or vend_id &#x3D; &#39;BRS01&#39;;</span><br><span class="line">#OR</span><br><span class="line">+---------------------+------------+</span><br><span class="line">| prod_name           | prod_price |</span><br><span class="line">+---------------------+------------+</span><br><span class="line">| Fish bean bag toy   | 3.49       |</span><br><span class="line">| Bird bean bag toy   | 3.49       |</span><br><span class="line">| Rabbit bean bag toy | 3.49       |</span><br><span class="line">| 8 inch teddy bear   | 5.99       |</span><br><span class="line">| 12 inch teddy bear  | 8.99       |</span><br><span class="line">| 18 inch teddy bear  | 11.99      |</span><br><span class="line">| Raggedy Ann         | 4.99       |</span><br><span class="line">+---------------------+------------+</span><br><span class="line"></span><br><span class="line"> select prod_name, prod_price from products where vend_id in (&#39;DLL01&#39;, &#39;BRS01&#39;) order by prod_name;</span><br><span class="line"> #也可以用OR完成一样的功能</span><br><span class="line"> SELECT prod_name, prod_priceFROM Products WHERE vend_id &#x3D; &#39;DLL01&#39; OR vend_id &#x3D; &#39;BRS01&#39;ORDER BY prod_name;</span><br><span class="line"> +---------------------+------------+</span><br><span class="line">| prod_name           | prod_price |</span><br><span class="line">+---------------------+------------+</span><br><span class="line">| 12 inch teddy bear  | 8.99       |</span><br><span class="line">| 18 inch teddy bear  | 11.99      |</span><br><span class="line">| 8 inch teddy bear   | 5.99       |</span><br><span class="line">| Bird bean bag toy   | 3.49       |</span><br><span class="line">| Fish bean bag toy   | 3.49       |</span><br><span class="line">| Rabbit bean bag toy | 3.49       |</span><br><span class="line">| Raggedy Ann         | 4.99       |</span><br><span class="line">+---------------------+------------+</span><br><span class="line">#关于IN</span><br><span class="line">#在有很多合法选项时，IN操作符的语法更清楚，更直观。</span><br><span class="line">#在与其他AND和OR操作符组合使用IN时，求值顺序更容易管理。</span><br><span class="line">#IN操作符一般比一组OR操作符执行得更快（在上面这个合法选项很少的例子中，你看不出性能差异）</span><br><span class="line">#IN的最大优点是可以包含其他SELECT语句，能够更动态地建立WHERE子句。后面会有</span><br><span class="line"></span><br><span class="line">select prod_name from products where not vend_id &#x3D; &#39;DLL01&#39; order by prod_name;</span><br><span class="line">+--------------------+</span><br><span class="line">| prod_name          |</span><br><span class="line">+--------------------+</span><br><span class="line">| 12 inch teddy bear |</span><br><span class="line">| 18 inch teddy bear |</span><br><span class="line">| 8 inch teddy bear  |</span><br><span class="line">| King doll          |</span><br><span class="line">| Queen doll         |</span><br><span class="line">+--------------------+</span><br><span class="line">#也可以用&lt;&gt;写法</span><br><span class="line">select prod_name from products where vend_id &lt;&gt; &#39;DLL01&#39; order by prod_name;</span><br><span class="line">#在更复杂的子句中，NOT是非常有用的。例如，在与IN操作符联合使用时，NOT可以非常简单地找出与条件列表不匹配的行。</span><br></pre></td></tr></table></figure>
<h1 id="通配符过滤LIKE"><a href="#通配符过滤LIKE" class="headerlink" title="通配符过滤LIKE"></a>通配符过滤LIKE</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">select prod_id, prod_namefrom products where prod_name like &#39;Fish%&#39;;</span><br><span class="line">#%,不会匹配null值</span><br><span class="line">+---------+-------------------+</span><br><span class="line">| prod_id | prod_name         |</span><br><span class="line">+---------+-------------------+</span><br><span class="line">| BNBG01  | Fish bean bag toy |</span><br><span class="line">+---------+-------------------+</span><br><span class="line"></span><br><span class="line">select prod_id, prod_name from products where prod_name like &#39;_ inch teddy bear&#39;;</span><br><span class="line">#_,匹配一个字符</span><br><span class="line">+---------+-------------------+</span><br><span class="line">| prod_id | prod_name         |</span><br><span class="line">+---------+-------------------+</span><br><span class="line">| BR01    | 8 inch teddy bear |</span><br><span class="line">+---------+-------------------+</span><br><span class="line"></span><br><span class="line">#不要过度使用通配符。如果其他操作符能达到相同的目的，应该使用其他操作符。在确实需要使用通配符时，也尽量不要把它们用在搜索模式的开始处。把通配符置于开始处，搜索起来是最慢的。</span><br></pre></td></tr></table></figure>
<h1 id="汇总数据（AVG-COUNT-MAX-MIN-SUM）"><a href="#汇总数据（AVG-COUNT-MAX-MIN-SUM）" class="headerlink" title="汇总数据（AVG,COUNT,MAX,MIN,SUM）"></a>汇总数据（AVG,COUNT,MAX,MIN,SUM）</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">select avg(prod_price) as avg_price from products;</span><br><span class="line">#AVG()通过对表中行数计数并计算其列值之和，求得该列的平均值。</span><br><span class="line">+-----------+</span><br><span class="line">| avg_price |</span><br><span class="line">+-----------+</span><br><span class="line">| 6.823333  |</span><br><span class="line">+-----------+</span><br><span class="line"></span><br><span class="line">select count(*) as num_cust from customers;</span><br><span class="line">#COUNT()函数进行计数确定表中行的数目或符合特定条件的行的数目。</span><br><span class="line">+----------+</span><br><span class="line">| num_cust |</span><br><span class="line">+----------+</span><br><span class="line">|        5 |</span><br><span class="line">+----------+</span><br><span class="line"></span><br><span class="line">select max(prod_price) as max_price from products;</span><br><span class="line">#MAX()返回指定列中的最大值</span><br><span class="line">+-----------+</span><br><span class="line">| max_price |</span><br><span class="line">+-----------+</span><br><span class="line">| 11.99     |</span><br><span class="line">+-----------+</span><br><span class="line"></span><br><span class="line">select min(prod_price) as max_price from products;</span><br><span class="line">#MAX()返回指定列中的最小值</span><br><span class="line">| max_price |</span><br><span class="line">+-----------+</span><br><span class="line">| 3.49      |</span><br><span class="line">+-----------+</span><br><span class="line"></span><br><span class="line">select sum(quantity) as items_ordered from orderItems where order_num &#x3D; 20005;</span><br><span class="line">#SUM()用来返回指定列值的和（总计）</span><br><span class="line">+---------------+</span><br><span class="line">| items_ordered |</span><br><span class="line">+---------------+</span><br><span class="line">| 200           |</span><br><span class="line">+---------------+</span><br></pre></td></tr></table></figure>
<h1 id="分组数据GROUP-BY-amp-HAVING"><a href="#分组数据GROUP-BY-amp-HAVING" class="headerlink" title="分组数据GROUP BY &amp; HAVING"></a>分组数据GROUP BY &amp; HAVING</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">select vend_id, count(*) as num_prods from products group by vend_id;</span><br><span class="line">+---------+-----------+</span><br><span class="line">| vend_id | num_prods |</span><br><span class="line">+---------+-----------+</span><br><span class="line">| BRS01   |         3 |</span><br><span class="line">| DLL01   |         4 |</span><br><span class="line">| FNG01   |         2 |</span><br><span class="line">+---------+-----------+</span><br><span class="line"></span><br><span class="line">select cust_id, count(*) as orders from orders group by cust_id having count(*) &gt;&#x3D; 2;</span><br><span class="line">#HAVING非常类似于WHERE,WHERE过滤行，而HAVING过滤分组</span><br><span class="line">#WHERE子句在这里不起作用，因为过滤是基于分组聚集值，而不是特定行的值</span><br><span class="line">+------------+--------+</span><br><span class="line">| cust_id    | orders |</span><br><span class="line">+------------+--------+</span><br><span class="line">| 1000000001 |      2 |</span><br><span class="line">+------------+--------+</span><br><span class="line"></span><br><span class="line">select vend_id, count(*) as num_prods from products where prod_price &gt;&#x3D; 4</span><br><span class="line">group by vend_id</span><br><span class="line">having count(*) &gt;&#x3D; 2;</span><br><span class="line">#HAVING与WHERE非常类似，如果不指定GROUP BY，则大多数DBMS会同等对待它们</span><br><span class="line">#使用HAVING时应该结合GROUP BY子句，而WHERE子句用于标准的行级过滤</span><br><span class="line">+---------+-----------+</span><br><span class="line">| vend_id | num_prods |</span><br><span class="line">+---------+-----------+</span><br><span class="line">| BRS01   |         3 |</span><br><span class="line">| FNG01   |         2 |</span><br><span class="line">+---------+-----------+</span><br></pre></td></tr></table></figure>
<h1 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="联结表JOIN"><a href="#联结表JOIN" class="headerlink" title="联结表JOIN"></a>联结表JOIN</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">select vend_name, prod_name, prod_price from vendors, products where vendors.vend_id &#x3D; products.vend_id;</span><br><span class="line">#这种叫做等值联结，也叫内联结，可以写多个表</span><br><span class="line">#等价于下面的写法</span><br><span class="line">select vend_name, prod_name, prod_price from vendors inner join products on vendors.vend_id &#x3D; products.vend_id;</span><br><span class="line">##这只是两种不一样的格式，效果是一样的</span><br><span class="line">+-----------------+---------------------+------------+</span><br><span class="line">| vend_name       | prod_name           | prod_price |</span><br><span class="line">+-----------------+---------------------+------------+</span><br><span class="line">| Doll House Inc. | Fish bean bag toy   | 3.49       |</span><br><span class="line">| Doll House Inc. | Bird bean bag toy   | 3.49       |</span><br><span class="line">| Doll House Inc. | Rabbit bean bag toy | 3.49       |</span><br><span class="line">| Bears R Us      | 8 inch teddy bear   | 5.99       |</span><br><span class="line">| Bears R Us      | 12 inch teddy bear  | 8.99       |</span><br><span class="line">| Bears R Us      | 18 inch teddy bear  | 11.99      |</span><br><span class="line">| Doll House Inc. | Raggedy Ann         | 4.99       |</span><br><span class="line">| Fun and Games   | King doll           | 9.49       |</span><br><span class="line">| Fun and Games   | Queen doll          | 9.49       |</span><br><span class="line">+-----------------+---------------------+------------+</span><br></pre></td></tr></table></figure>
<h1 id="创建高级联结"><a href="#创建高级联结" class="headerlink" title="创建高级联结"></a>创建高级联结</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#自联结</span><br><span class="line">select c1.cust_id, c1.cust_name, c1.cust_contact from customers as c1, customers as c2 where c1.cust_name &#x3D; c2.cust_name and c2.cust_contact &#x3D; &#39;Jim Jones&#39;;</span><br><span class="line">#也可用子查询代替，一般自联结效率高</span><br><span class="line">+------------+-----------+--------------------+</span><br><span class="line">| cust_id    | cust_name | cust_contact       |</span><br><span class="line">+------------+-----------+--------------------+</span><br><span class="line">| 1000000003 | Fun4All   | Jim Jones          |</span><br><span class="line">| 1000000004 | Fun4All   | Denise L. Stephens |</span><br><span class="line">+------------+-----------+--------------------+</span><br><span class="line">#自然联结，每个内联结都是自然联结</span><br><span class="line">#外联结，联结包含了那些在相关表中没有关联行的行</span><br><span class="line">select customers.cust_id, Orders.order_num from customers inner join orders on customers.cust_id &#x3D; orders.cust_id;</span><br><span class="line">+------------+-----------+</span><br><span class="line">| cust_id    | order_num |</span><br><span class="line">+------------+-----------+</span><br><span class="line">| 1000000001 |     20005 |</span><br><span class="line">| 1000000001 |     20009 |</span><br><span class="line">| 1000000003 |     20006 |</span><br><span class="line">| 1000000004 |     20007 |</span><br><span class="line">| 1000000005 |     20008 |</span><br><span class="line">+------------+-----------+</span><br><span class="line">select customers.cust_id, Orders.order_num from customers left outer join orders on customers.cust_id &#x3D; orders.cust_id;</span><br><span class="line">+------------+-----------+</span><br><span class="line">| cust_id    | order_num |</span><br><span class="line">+------------+-----------+</span><br><span class="line">| 1000000001 |     20005 |</span><br><span class="line">| 1000000001 |     20009 |</span><br><span class="line">| 1000000002 | NULL      |</span><br><span class="line">| 1000000003 |     20006 |</span><br><span class="line">| 1000000004 |     20007 |</span><br><span class="line">| 1000000005 |     20008 |</span><br><span class="line">+------------+-----------+</span><br><span class="line">#使用OUTER JOIN语法时，必须使用RIGHT或LEFT关键字指定包括其所有行的表</span><br><span class="line">#A RIGHT OUTER JOIN B  从B表中选择所有行</span><br><span class="line">#A LEFT OUTER JOIN B	从A表中选择所有行</span><br></pre></td></tr></table></figure>
<h1 id="组合查询UNION"><a href="#组合查询UNION" class="headerlink" title="组合查询UNION"></a>组合查询UNION</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">select cust_name, cust_contact, cust_email from customers where cust_state in (&#39;IL&#39;,&#39;IN&#39;,&#39;MI&#39;);</span><br><span class="line">+---------------+--------------+-----------------------+</span><br><span class="line">| cust_name     | cust_contact | cust_email            |</span><br><span class="line">+---------------+--------------+-----------------------+</span><br><span class="line">| Village Toys  | John Smith   | sales@villagetoys.com |</span><br><span class="line">| Fun4All       | Jim Jones    | jjones@fun4all.com    |</span><br><span class="line">| The Toy Store | Kim Howard   | NULL                  |</span><br><span class="line">+---------------+--------------+-----------------------+</span><br><span class="line">select cust_name, cust_contact, cust_email from customers where cust_name &#x3D; &#39;Fun4All&#39;;</span><br><span class="line">+-----------+--------------------+-----------------------+</span><br><span class="line">| cust_name | cust_contact       | cust_email            |</span><br><span class="line">+-----------+--------------------+-----------------------+</span><br><span class="line">| Fun4All   | Jim Jones          | jjones@fun4all.com    |</span><br><span class="line">| Fun4All   | Denise L. Stephens | dstephens@fun4all.com |</span><br><span class="line">+-----------+--------------------+-----------------------+</span><br><span class="line">#可以使用UNION分隔两条select语句，并把输出组合成一个查询集</span><br><span class="line">select cust_name, cust_contact, cust_email from customers where cust_state in (&#39;IL&#39;,&#39;IN&#39;,&#39;MI&#39;)</span><br><span class="line">union</span><br><span class="line">select cust_name, cust_contact, cust_email from customers where cust_name &#x3D; &#39;Fun4All&#39;;</span><br><span class="line">+---------------+--------------------+-----------------------+</span><br><span class="line">| cust_name     | cust_contact       | cust_email            |</span><br><span class="line">+---------------+--------------------+-----------------------+</span><br><span class="line">| Village Toys  | John Smith         | sales@villagetoys.com |</span><br><span class="line">| Fun4All       | Jim Jones          | jjones@fun4all.com    |</span><br><span class="line">| The Toy Store | Kim Howard         | NULL                  |</span><br><span class="line">| Fun4All       | Denise L. Stephens | dstephens@fun4all.com |</span><br><span class="line">+---------------+--------------------+-----------------------+</span><br><span class="line"> #UNION规则</span><br><span class="line"> #UNION必须由两条或两条以上的SELECT语句组成，语句之间用关键字UNION分隔（因此，如果组合四条SELECT语句，将要使用三个UNION关键字）</span><br><span class="line"> #UNION中的每个查询必须包含相同的列</span><br><span class="line">select cust_name, cust_contact, cust_email from customers where cust_state in (&#39;IL&#39;,&#39;IN&#39;,&#39;MI&#39;)</span><br><span class="line">union all</span><br><span class="line">select cust_name, cust_contact, cust_email from customers where cust_name &#x3D; &#39;Fun4All&#39;;</span><br><span class="line">+---------------+--------------------+-----------------------+</span><br><span class="line">| cust_name     | cust_contact       | cust_email            |</span><br><span class="line">+---------------+--------------------+-----------------------+</span><br><span class="line">| Village Toys  | John Smith         | sales@villagetoys.com |</span><br><span class="line">| Fun4All       | Jim Jones          | jjones@fun4all.com    |</span><br><span class="line">| The Toy Store | Kim Howard         | NULL                  |</span><br><span class="line">| Fun4All       | Jim Jones          | jjones@fun4all.com    |</span><br><span class="line">| Fun4All       | Denise L. Stephens | dstephens@fun4all.com |</span><br><span class="line">+---------------+--------------------+-----------------------+</span><br><span class="line">#UNION从查询的结果集中自动去除了重复的行，所以如果多条select语句返回相同的行</span><br><span class="line">#重复的行会被自动取消，这是默认的，可以使用UNION ALL返回的匹配行</span><br><span class="line">select cust_name, cust_contact, cust_email from customers where cust_state in (&#39;IL&#39;,&#39;IN&#39;,&#39;MI&#39;)</span><br><span class="line">union</span><br><span class="line">select cust_name, cust_contact, cust_email from customers where cust_name &#x3D; &#39;Fun4All&#39; </span><br><span class="line">order by cust_name, cust_contact;</span><br><span class="line">#对组合查询结果排序，只能使用一条ORDER BY且位于最后一条SELECT语句之后</span><br></pre></td></tr></table></figure>
<h1 id="插入数据INSERT"><a href="#插入数据INSERT" class="headerlink" title="插入数据INSERT"></a>插入数据INSERT</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#插入完整的行</span><br><span class="line">INSERT INTO Customers VALUES(&#39;1000000006&#39;,&#39;Toy Land&#39;,&#39;123 Any Street&#39;,&#39;New York&#39;,&#39;NY&#39;, &#39;11111&#39;,   &#39;USA&#39;, NULL, NULL); </span><br><span class="line">#简单，不安全，高度依赖于表中列的定义次序，安全的写法，即使表的结构改变，这条INSERT语句仍然能正确工作</span><br><span class="line">INSERT INTO Customers(cust_id,cust_name,cust_address,cust_city,cust_state, cust_zip, cust_country, cust_contact,cust_email)VALUES(&#39;1000000006&#39;,&#39;Toy Land&#39;, &#39;123 Any Street&#39;,  &#39;New York&#39;, &#39;NY&#39;, &#39;11111&#39;,  &#39;USA&#39;, NULL, NULL);</span><br><span class="line"></span><br><span class="line">#插入部分行</span><br><span class="line">INSERT INTO Customers(cust_id,cust_name, cust_address,cust_city, cust_state, cust_zip,       cust_country) VALUES(&#39;1000000006&#39;,&#39;Toy Land&#39;, &#39;123 Any Street&#39;, &#39;New York&#39;,&#39;NY&#39;, &#39;11111&#39;,  &#39;USA&#39;);</span><br><span class="line">#省略的列：该列定义允许为NULL或给出默认值</span><br><span class="line"></span><br><span class="line">#插入检索出的数据</span><br><span class="line">INSERT INTO Customers(cust_id,cust_contact,cust_email,cust_name, cust_address,           cust_city, cust_state,cust_zip,cust_country) SELECT cust_id,cust_contact, cust_email,  cust_name, cust_address, cust_city,cust_state, cust_zip,cust_country FROM CustNew;</span><br><span class="line">#INSERT SELECT将SELECT语句的结果插入表中</span><br><span class="line"></span><br><span class="line">#从一个表复制到另一个表</span><br><span class="line">CREATE TABLE CustCopy AS SELECT * FROM Customers;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="更新和删除数据UPADTE-amp-DELETE"><a href="#更新和删除数据UPADTE-amp-DELETE" class="headerlink" title="更新和删除数据UPADTE &amp; DELETE"></a>更新和删除数据UPADTE &amp; DELETE</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#单列</span><br><span class="line">update customers set cust_emali &#x3D; &#39;kim@thetoystore.com&#39; where cust_id &#x3D; &#39;10000005&#39;;</span><br><span class="line">#多列</span><br><span class="line">update customers set cust_emali &#x3D; &#39;kim@thetoystore.com&#39;, cust_contact &#x3D; &#39;TOM BOR&#39; where cust_id &#x3D; &#39;10000005&#39;;</span><br><span class="line"></span><br><span class="line">delete from customers where cust_id &#x3D; &#39;100000006&#39;;</span><br></pre></td></tr></table></figure>
<h1 id="创建和操纵表"><a href="#创建和操纵表" class="headerlink" title="创建和操纵表"></a>创建和操纵表</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#创建表</span><br><span class="line">CREATE TABLE OrderItems(    </span><br><span class="line">    order_num      INTEGER          NOT NULL,    </span><br><span class="line">    order_item     INTEGER          NOT NULL,   </span><br><span class="line">    prod_id        CHAR(10)         NOT NULL,    </span><br><span class="line">    quantity       INTEGER          NOT NULL      DEFAULT 1,    </span><br><span class="line">    item_price     DECIMAL(8,2)     NOT NULL);</span><br><span class="line">    </span><br><span class="line">#更新表</span><br><span class="line">alter table vendors add vend_phone char(20);</span><br><span class="line">#这条语句给Vendors表增加一个名为vend_phone的列，其数据类型为CHAR</span><br><span class="line">alter table Vendors drop column vend_phone;</span><br><span class="line">#这条语句删除列</span><br><span class="line"></span><br><span class="line">#删除表</span><br><span class="line">drop table custcopy;</span><br></pre></td></tr></table></figure>
<h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#视图是虚拟的表</span><br><span class="line">SELECT cust_name, cust_contact FROM Customers, Orders, OrderItems WHERE Customers.cust_id &#x3D; Orders.cust_id AND OrderItems.order_num &#x3D; Orders.order_num AND prod_id &#x3D; &#39;RGAN01&#39;;  </span><br><span class="line">#假设可以把整个查询包装成一个名为ProductCustomers的虚拟表，，则可以如下轻松地检索出相同的数据：</span><br><span class="line">SELECT cust_name, cust_contact FROM ProductCustomersWHERE prod_id &#x3D; &#39;RGAN01&#39;;</span><br><span class="line">#这就是视图的作用。ProductCustomers是一个视图，作为视图，它不包含任何列或数据，包含的是一个查询</span><br><span class="line">#视图常见应用：</span><br><span class="line">#重用SQL语句。简化复杂的SQL操作。</span><br><span class="line">#在编写查询后，可以方便地重用它而不必知道其基本查询细节。</span><br><span class="line">#使用表的一部分而不是整个表。保护数据。可以授予用户访问表的特定部分的权限，而不是整个表的访问权限。更改数据格式和表示。视图可返回与底层表的表示和格式不同的数据</span><br><span class="line"></span><br><span class="line">#创建视图</span><br><span class="line">create view as ;</span><br><span class="line">#删除视图</span><br><span class="line">drop view viewname;</span><br><span class="line"></span><br><span class="line">create view productcustomers as </span><br><span class="line">select cust_name, cust_contact, prod_id</span><br><span class="line">from customers, orders, orderItems</span><br><span class="line">where customers.cust_id &#x3D; orders.cust_id</span><br><span class="line">and orderitems.order_num &#x3D; orders.order_num;</span><br><span class="line">#创建视图productcustomers</span><br><span class="line">select cust_name, cust_contact </span><br><span class="line">from productcustomers </span><br><span class="line">where prod_id &#x3D; &#39;RGAN01&#39;;</span><br><span class="line">+---------------+--------------------+</span><br><span class="line">| cust_name     | cust_contact       |</span><br><span class="line">+---------------+--------------------+</span><br><span class="line">| Fun4All       | Denise L. Stephens |</span><br><span class="line">| The Toy Store | Kim Howard         |</span><br><span class="line">+---------------+--------------------+</span><br><span class="line">#利用视图查询</span><br></pre></td></tr></table></figure>
<h1 id="使用存储过程"><a href="#使用存储过程" class="headerlink" title="使用存储过程"></a>使用存储过程</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#存储过程就是为以后使用而保存的一条或多条SQL语句</span><br></pre></td></tr></table></figure>
<h1 id="事务COMMIT-amp-ROLLBACK"><a href="#事务COMMIT-amp-ROLLBACK" class="headerlink" title="事务COMMIT &amp; ROLLBACK"></a>事务COMMIT &amp; ROLLBACK</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">start transaction</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">#保留点</span><br><span class="line">save transaction delete1;</span><br><span class="line">#退回保留点</span><br><span class="line">rollback to delete1;</span><br></pre></td></tr></table></figure>
<h1 id="约束-amp-索引-amp-触发器"><a href="#约束-amp-索引-amp-触发器" class="headerlink" title="约束&amp;索引&amp;触发器"></a>约束&amp;索引&amp;触发器</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#约束</span><br><span class="line"></span><br><span class="line">#主键：</span><br><span class="line">#任意两行的主键值都不相同</span><br><span class="line">#每行都具有一个主键值</span><br><span class="line">#包含主键值的列从不修改或更新</span><br><span class="line">#主键值不能重用。如果从表中删除某一行，其主键值不分配给新行</span><br><span class="line">#1.</span><br><span class="line">CREATE TABLE Vendors (vend_id         CHAR(10)       NOT NULL PRIMARY KEY, </span><br><span class="line">                      vend_name       CHAR(50)       NOT NULL,</span><br><span class="line">                      vend_address    CHAR(50)       NULL,</span><br><span class="line">                      vend_city       CHAR(50)       NULL,</span><br><span class="line">                      vend_state      CHAR(5)        NULL,</span><br><span class="line">                      vend_zip        CHAR(10)       NULL,</span><br><span class="line">                      vend_country    CHAR(50)       NULL);</span><br><span class="line">                    </span><br><span class="line">#2.</span><br><span class="line">ALTER TABLE Vendors ADD CONSTRAINT PRIMARY KEY (vend_id);</span><br><span class="line"></span><br><span class="line">#外键</span><br><span class="line">#外键是表中的一列，其值必须列在另一表的主键中。外键是保证引用完整性的极其重要部分。</span><br><span class="line">#1.</span><br><span class="line">CREATE TABLE Orders(   </span><br><span class="line">    order_num     INTEGER     NOT NULL PRIMARY KEY, </span><br><span class="line">    order_date    DATETIME    NOT NULL,  </span><br><span class="line">    cust_id       CHAR(10)    NOT NULL REFERENCES Customers(cust_id)</span><br><span class="line">);</span><br><span class="line">#2.</span><br><span class="line">ALTER TABLE OrdersADD CONSTRAINT FOREIGN KEY (cust_id) REFERENCES Customers (cust_id)</span><br><span class="line">#外键有助防止意外删除              </span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#索引</span><br><span class="line">#索引用来排序数据以加快搜索和排序操作的速度</span><br><span class="line">#如果排序好的话就没必要索引，所以一般搜索其他列效率不高</span><br><span class="line">CREATE INDEX prod_name_ind ON PRODUCTS (prod_name);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#触发器</span><br><span class="line">#触发器是特殊的存储过程，它在特定的数据库活动发生时自动执行。</span><br><span class="line">#触发器与单个的表相关联。与Orders表上的INSERT操作相关联的触发器只在Orders表中插入行时执行。类似地，Customers表上的INSERT和UPDATE操作的触发器只在表上出现这些操作时执行</span><br><span class="line"></span><br></pre></td></tr></table></figure>



    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/01/18/Oracle/" rel="prev" title="Oracle">
      <i class="fa fa-chevron-left"></i> Oracle
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/01/20/spring/" rel="next" title="spring">
      spring <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL"><span class="nav-number">1.</span> <span class="nav-text">MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MyISAM%E5%92%8CInnoDB%E5%8C%BA%E5%88%AB"><span class="nav-number">1.0.1.</span> <span class="nav-text">MyISAM和InnoDB区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95"><span class="nav-number">1.0.2.</span> <span class="nav-text">索引</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="nav-number">1.0.2.1.</span> <span class="nav-text">为什么要创建索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E5%AF%B9%E6%AF%8F%E4%B8%AA%E8%A1%A8%E9%83%BD%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="nav-number">1.0.2.2.</span> <span class="nav-text">为什么不对每个表都创建索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">1.0.2.3.</span> <span class="nav-text">使用索引注意事项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E8%A6%86%E7%9B%96"><span class="nav-number">1.0.2.4.</span> <span class="nav-text">索引覆盖</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E7%B4%A2%E5%BC%95%E4%BC%9A%E5%8F%98%E5%BF%AB"><span class="nav-number">1.0.2.5.</span> <span class="nav-text">为什么索引会变快</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1"><span class="nav-number">1.0.3.</span> <span class="nav-text">事务</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B9%B6%E5%8F%91%E4%BA%8B%E5%8A%A1%E5%B8%A6%E6%9D%A5%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">1.0.3.1.</span> <span class="nav-text">并发事务带来的问题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%94%81%E6%9C%BA%E5%88%B6%E4%B8%8EInnoDB%E9%94%81%E7%AE%97%E6%B3%95"><span class="nav-number">1.0.4.</span> <span class="nav-text">锁机制与InnoDB锁算法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">1.0.5.</span> <span class="nav-text">什么是触发器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#select"><span class="nav-number">1.1.</span> <span class="nav-text">select</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#select-distinct"><span class="nav-number">1.1.1.</span> <span class="nav-text">select distinct</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#select-where"><span class="nav-number">1.1.2.</span> <span class="nav-text">select where</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#like"><span class="nav-number">1.2.</span> <span class="nav-text">like</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#in"><span class="nav-number">1.3.</span> <span class="nav-text">in</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#between"><span class="nav-number">1.4.</span> <span class="nav-text">between</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#order-by"><span class="nav-number">1.5.</span> <span class="nav-text">order by</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#insert-into"><span class="nav-number">1.6.</span> <span class="nav-text">insert into</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NULL%E5%80%BC"><span class="nav-number">1.7.</span> <span class="nav-text">NULL值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#update"><span class="nav-number">1.8.</span> <span class="nav-text">update</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#delete"><span class="nav-number">1.9.</span> <span class="nav-text">delete</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#limit"><span class="nav-number">1.10.</span> <span class="nav-text">limit</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#min-max"><span class="nav-number">1.11.</span> <span class="nav-text">min(),max()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#count-avg-sum"><span class="nav-number">1.12.</span> <span class="nav-text">count(),avg(),sum()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#inner-join"><span class="nav-number">1.13.</span> <span class="nav-text">inner join</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#left-join"><span class="nav-number">1.14.</span> <span class="nav-text">left join</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#right-join"><span class="nav-number">1.15.</span> <span class="nav-text">right join</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#full-join-full-outer-join"><span class="nav-number">1.16.</span> <span class="nav-text">full join &#x2F; full outer join</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#group-by"><span class="nav-number">1.17.</span> <span class="nav-text">group by</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#having"><span class="nav-number">1.18.</span> <span class="nav-text">having</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#exists"><span class="nav-number">1.19.</span> <span class="nav-text">exists</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AEselect"><span class="nav-number">2.</span> <span class="nav-text">检索数据select</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8E%92%E5%BA%8F%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AEorder-by"><span class="nav-number">3.</span> <span class="nav-text">排序检索数据order by</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AEwhere"><span class="nav-number">4.</span> <span class="nav-text">过滤数据where</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E6%95%B0%E6%8D%AE%E8%BF%87%E6%BB%A4NOT%EF%BC%8CIN"><span class="nav-number">5.</span> <span class="nav-text">高级数据过滤NOT，IN</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%80%9A%E9%85%8D%E7%AC%A6%E8%BF%87%E6%BB%A4LIKE"><span class="nav-number">6.</span> <span class="nav-text">通配符过滤LIKE</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE%EF%BC%88AVG-COUNT-MAX-MIN-SUM%EF%BC%89"><span class="nav-number">7.</span> <span class="nav-text">汇总数据（AVG,COUNT,MAX,MIN,SUM）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AEGROUP-BY-amp-HAVING"><span class="nav-number">8.</span> <span class="nav-text">分组数据GROUP BY &amp; HAVING</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">9.</span> <span class="nav-text">子查询</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%81%94%E7%BB%93%E8%A1%A8JOIN"><span class="nav-number">10.</span> <span class="nav-text">联结表JOIN</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E9%AB%98%E7%BA%A7%E8%81%94%E7%BB%93"><span class="nav-number">11.</span> <span class="nav-text">创建高级联结</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2UNION"><span class="nav-number">12.</span> <span class="nav-text">组合查询UNION</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AEINSERT"><span class="nav-number">13.</span> <span class="nav-text">插入数据INSERT</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AEUPADTE-amp-DELETE"><span class="nav-number">14.</span> <span class="nav-text">更新和删除数据UPADTE &amp; DELETE</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E7%BA%B5%E8%A1%A8"><span class="nav-number">15.</span> <span class="nav-text">创建和操纵表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%86%E5%9B%BE"><span class="nav-number">16.</span> <span class="nav-text">视图</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">17.</span> <span class="nav-text">使用存储过程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1COMMIT-amp-ROLLBACK"><span class="nav-number">18.</span> <span class="nav-text">事务COMMIT &amp; ROLLBACK</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BA%A6%E6%9D%9F-amp-%E7%B4%A2%E5%BC%95-amp-%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">19.</span> <span class="nav-text">约束&amp;索引&amp;触发器</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="wudelic"
      src="/uploads/avatar.png">
  <p class="site-author-name" itemprop="name">wudelic</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">24</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wudelic</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v5.3.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
